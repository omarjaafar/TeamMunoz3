{% extends 'base.html' %}
{% block content %}
<div class="p-3">
<div class="container" style="max-width: 720px;">
<h2 class="mb-3">{{ template_data.title }}</h2>
<form method="post" class="vstack gap-3">
{% csrf_token %}


<div>
<label class="form-label">Title</label>
<input class="form-control" name="title" value="{{ template_data.job.title|default:'' }}" required>
</div>


<div>
<label class="form-label">Company</label>
<input class="form-control" name="company" value="{{ template_data.job.company|default:'' }}" required>
</div>


<div>
<label class="form-label">Location</label>
<input class="form-control" name="location" value="{{ template_data.job.location|default:'' }}" required>
</div>


<div>
<label class="form-label">Job Type</label>
<select class="form-select" name="job_type">
{% with jt=template_data.job.job_type|default:'FT' %}
<option value="FT" {% if jt == 'FT' %}selected{% endif %}>Full-time</option>
<option value="PT" {% if jt == 'PT' %}selected{% endif %}>Part-time</option>
<option value="CT" {% if jt == 'CT' %}selected{% endif %}>Contract</option>
<option value="IN" {% if jt == 'IN' %}selected{% endif %}>Internship</option>
<option value="TM" {% if jt == 'TM' %}selected{% endif %}>Temporary</option>
{% endwith %}
</select>
</div>


<div>
<label class="form-label">Salary</label>
<input class="form-control" name="salary" type="number" step="0.01" value="{{ template_data.job.salary|default:'' }}">
</div>


<div>
<label class="form-label">Description</label>
<textarea class="form-control" name="description" rows="5">{{ template_data.job.description|default:'' }}</textarea>
</div>


<div class="d-flex align-items-center gap-2">
  <button class="btn btn-success" type="submit">Save</button>
  <a class="btn btn-secondary" href="{% url 'jobs.index' %}">Cancel</a>

  {% if template_data.job %}
    <button
      class="btn btn-danger ms-auto"
      type="submit"
      formaction="{% url 'jobs.delete' template_data.job.id %}"
      formmethod="post"
      onclick="return confirm('Delete this job permanently?');">
      Delete
    </button>
  {% endif %}
</div>
</div>
{% endblock content %}